# Стартовый проект с gulp

![David](https://img.shields.io/david/dev/alekseyburn/ab-start-project?style=flat-square)

<table>
  <thead>
    <tr>
      <th>Команда</th>
      <th>Результат</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td width="22%"><code>npm i</code></td>
      <td>Установить зависимости</td>
    </tr>
    <tr>
      <td><code>npm start</code></td>
      <td>Запустить сборку, сервер и слежение за файлами</td>
    </tr>
    <tr>
      <td><code>npm start ЗАДАЧА</code></td>
      <td>Запустить задачу с названием ЗАДАЧА (список задач в <code>gulpfile.js</code>)</td>
    </tr>
    <tr>
      <td><code>npm run build</code></td>
      <td>Сборка проекта без карт кода (минифицированый вид, как результат работы)</td>
    </tr>
    <tr>
      <td><code>npm run deploy</code></td>
      <td>Отправка содержимого папки сборки на GH-pages (для корректного сообщения адреса просмотра введите его в <code>package.json</code>)</td>
    </tr>
    <tr>
      <td><code>npm test</code></td>
      <td>Тестирование stylelint-ом.</td>
    </tr>
    <tr>
      <td><code>NODE_ENV=production npm start</code></td>
      <td>Сборка проекта без карт кода с минификацией.</td>
    </tr>
  </tbody>
</table>

- Используется именование классов, переменных и файлов по БЭМ.
- Каждый БЭМ-блок в своей папке внутри `/src/blocks/` (scss, js, картинки, разметка; обязателен только scss-файл).
- Есть глобальные файлы: css, js, шрифты, картинки, scss-файлы (переменные, глобальная стилизация...).
- Есть диспетчер подключений `/src/sass/style.scss`. Если в нем импортирован scss-файл какого-либо блока, этот блок считается используемым (обрабатывается его js и доп. файлы).

## Блоки

Каждый блок лежит в `/src/blocks/` в своей папке. Каждый блок — как минимум, папка и одноимённый scss-файл.

Возможное содержимое блока:

```bash
block-name/               # Папка блока
  img/                    # Изображения, используемые блоком
  demo-block.scss         # Главный стилевой файл блока
  demo-block.js           # Главный js-файл блока
  demo-block.html         # Варианты разметки (только как документация блока или как вставляемый фрагмент)
  demo-block.css          # Добавочный css (копируется как отдельный файл в `build/css`)
  readme.md               # Какое-то пояснение
```

## Создание нового блока


```bash
# формат: node createBlock.js [имя блока] [доп. расширения через пробел]
node createBlock.js block # создаст только папку, block.html и block.scss
node createBlock.js new-block js jade # создаст папку, new-block.html, new-block.scss, new-block.js, new-block.jade
node createBlock.js new-block js img # создаст папку блока, new-block.html, new-block.scss, new-block.js, подпапку img/
```

По умолчанию будут созданы `.html` и `.scss` файлы, в них будет записан стартовый контент.

Если блок уже существует, файлы не будут затёрты, но создадутся те файлы, которые ещё не существуют.

После создания блока, в диспетчер подключений будет дописана (в самый низ) строка импорта стилевого файла.

## Подключение блоков

Если в диспетчере подключений (`./src/sass/style.scss`):

```
@import "./src/blocks/demo-block/demo-block.scss";
```

То указанный файл будет взят в компиляцию стилей, а так же:
- в обработку будет взят js-файл блока: `./src/blocks/demo-block/demo-block.js` (если существует и не пустой)
- в обработку будет взят css-файл блока: `./src/blocks/demo-block/demo-block.css` (если существует и не пустой)
- в обработку будут добавлены все картинки блока: `./src/blocks/demo-block/img/*.{jpg,jpeg,png,svg}`


## Назначение папок

```bash
build/          # Сюда собирается проект, здесь работает сервер автообновлений.
src/            # Исходные файлы
  blocks/       # - блоки (компоненты) проекта
  css/          # - глобальные css-файлы (будут скопированы только если существуют и не пустые)
  fonts/        # -  шрифты проекта (будут скопированы в папку сборки, подпапку fonts/)
  img/          # - глобальные картинки (будут обработаны только из корня этой папки, подпапки игнорируются)
  js/           # - глобальный js-файл (обработается только если существует и не пустой)
  sass/         # - диспетчер подключений и глобальные стили
  index.html            # главная страница проекта
```
